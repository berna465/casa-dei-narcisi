<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <title>Casa dei Narcisi — Loft a Milano (Paolo Sarpi)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Casa dei Narcisi: loft moderno a Milano in zona Paolo Sarpi. Prenotazione diretta dal sito ufficiale.">

  <style>
    :root{
      --bg:#0f1220;
      --card:#161a2b;
      --txt:#ffffff;
      --muted:#aeb6c7;
      --line:#2a2f45;
      --acc:#4fd1c5;
      --acc2:#7dd3fc;
      --shadow: 0 8px 20px rgba(0,0,0,.25);
      --r:14px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:var(--bg);
      color:var(--txt);
      padding-bottom:72px; /* spazio per footer sticky */
    }

    a{ color:inherit; }
    .wrap{ max-width:1100px; margin:auto; padding:30px; }

    .card{
      background:var(--card);
      border-radius:var(--r);
      padding:22px;
      box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,.04);
    }

    .muted{ color:var(--muted); }
    h1{ font-size:40px; margin:0 0 10px; line-height:1.05; }
    h2{ margin:0 0 10px; font-size:20px; }
    h3{ margin:0 0 10px; font-size:16px; }
    p{ margin:0 0 12px; }

    /* Top nav */
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:14px;
    }
    .brand{ font-weight:800; letter-spacing:.2px; }
    .navlinks{ display:flex; gap:14px; flex-wrap:wrap; }
    .navlinks a{
      text-decoration:none;
      color:var(--muted);
      font-weight:650;
      padding:6px 10px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.06);
      background:rgba(255,255,255,.02);
    }
    .navlinks a:hover{ color:var(--txt); border-color:rgba(255,255,255,.12); }

    /* Hero */
    .hero{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:18px;
      align-items:stretch;
      margin-bottom:18px;
    }
    .hero img{ width:100%; border-radius:12px; display:block; }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding:12px 16px;
      border-radius:12px;
      text-decoration:none;
      font-weight:800;
      border:1px solid rgba(255,255,255,.06);
    }
    .btn.primary{ background:var(--acc); color:#041014; border-color:transparent; }
    .btn.ghost{ background:transparent; color:var(--txt); border-color:rgba(255,255,255,.14); }
    .btn.primary:hover{ filter:brightness(1.05); }
    .btn.ghost:hover{ border-color:rgba(255,255,255,.22); }

    /* Main layout: left content, right booking */
    .main{
      display:grid;
      grid-template-columns: 1.08fr 0.92fr;
      gap:18px;
      align-items:start;
    }
    .sticky{
      position:sticky;
      top:16px;
    }

    /* Sections spacing */
    .section{ margin-bottom:18px; }
    .section:last-child{ margin-bottom:0; }

    /* Services list */
    ul{ margin:10px 0 0 18px; padding:0; }
    li{ margin:8px 0; }
    strong{ color:var(--txt); }

    /* Gallery */
    .grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:12px;
      margin-top:10px;
    }
    .thumb{
      border-radius:12px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.06);
      background:#0b0e1a;
      cursor:pointer;
      position:relative;
    }
    .thumb img{
      width:100%;
      height:190px;
      object-fit:cover;
      display:block;
      transform:scale(1.001);
      transition:transform .15s ease;
    }
    .thumb:hover img{ transform:scale(1.03); }
    .thumb:focus-visible{ outline:2px solid var(--acc2); outline-offset:2px; }

    /* Booking wrapper */
    .booking-shell{
      padding:18px;
      border-radius:var(--r);
      background:var(--card);
      box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,.04);
    }
    #apartmentIframeAll{
      border-radius:12px;
      overflow:hidden;
      background:#0b0e1a;
      min-height:520px; /* anti-jump */
      border:1px solid rgba(255,255,255,.06);
    }
    #apartmentIframeAll iframe{
      width:100% !important;
      height:520px !important;
      border:0 !important;
      display:block;
      border-radius:12px;
    }

    /* Contact form */
    .form{
      display:grid;
      gap:10px;
      margin-top:10px;
    }
    .row2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    input, textarea{
      width:100%;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#0b0e1a;
      color:var(--txt);
      outline:none;
    }
    textarea{ min-height:130px; resize:vertical; }
    input::placeholder, textarea::placeholder{ color:var(--muted); }

    .hint{ font-size:12px; color:var(--muted); }

    /* Lightbox */
    .lb{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.82);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:9999;
      padding:18px;
    }
    .lb.open{ display:flex; }
    .lb-inner{
      width:min(980px, 100%);
      background:#0b0e1a;
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px;
      box-shadow:0 30px 80px rgba(0,0,0,.55);
      overflow:hidden;
      position:relative;
    }
    .lb-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:10px 12px;
      border-bottom:1px solid rgba(255,255,255,.08);
      color:var(--muted);
      gap:10px;
    }
    .lb-top .title{ font-size:13px; }
    .lb-actions{ display:flex; gap:8px; }
    .iconbtn{
      background:transparent;
      border:1px solid rgba(255,255,255,.12);
      color:var(--txt);
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:800;
    }
    .iconbtn:hover{ border-color:rgba(255,255,255,.22); }
    .lb-img{
      width:100%;
      height:min(72vh, 760px);
      display:flex;
      align-items:center;
      justify-content:center;
      background:#000;
    }
    .lb-img img{
      max-width:100%;
      max-height:100%;
      object-fit:contain;
      display:block;
    }
    .lb-nav{
      position:absolute;
      inset:0;
      pointer-events:none;
    }
    .lb-prev, .lb-next{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      pointer-events:auto;
    }
    .lb-prev{ left:10px; }
    .lb-next{ right:10px; }

    /* Sticky footer bar */
    .footerbar{
      position:fixed;
      left:0; right:0; bottom:0;
      background:rgba(11,14,26,.92);
      backdrop-filter: blur(10px);
      border-top:1px solid rgba(255,255,255,.08);
      z-index:9998;
    }
    .footerbar .inner{
      max-width:1100px;
      margin:auto;
      padding:10px 14px;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .footerbar .mini{
      color:var(--muted);
      font-size:13px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    /* Responsive */
    @media(max-width: 980px){
      .hero{ grid-template-columns:1fr; }
      .main{ grid-template-columns:1fr; }
      .sticky{ position:static; }
      h1{ font-size:32px; }
      .grid{ grid-template-columns:1fr 1fr; }
      #apartmentIframeAll{ min-height:620px; }
      #apartmentIframeAll iframe{ height:620px !important; }
      .row2{ grid-template-columns:1fr; }
    }
    @media(max-width: 560px){
      .grid{ grid-template-columns:1fr; }
      .nav{ flex-direction:column; align-items:flex-start; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="nav">
      <div class="brand">Casa dei Narcisi</div>
      <div class="navlinks">
        <a href="#servizi">Servizi</a>
        <a href="#foto">Foto</a>
        <a href="#posizione">Posizione</a>
        <a href="#contatti">Contatti</a>
        <a href="#prenota">Prenota</a>
      </div>
    </div>

    <div class="hero">
      <div class="card">
        <h1>Loft moderno a Milano<br><span class="muted">zona Paolo Sarpi</span></h1>
        <p class="muted">Un rifugio curato e funzionale in Chinatown: perfetto per soggiorni business o leisure, e comodissimo per eventi in città.</p>
        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;">
          <a class="btn primary" href="#prenota">Verifica disponibilità</a>
          <a class="btn ghost" href="#contatti">Scrivici</a>
        </div>
        <p class="muted" style="margin-top:10px; font-size:13px;">
          Prenotazione diretta dal sito ufficiale.
        </p>
      </div>

      <div class="card">
        <img src="images/hero.jpg" alt="Casa dei Narcisi — Milano">
      </div>
    </div>

    <div class="main">
      <!-- LEFT COLUMN -->
      <div>
        <div class="card section" id="servizi">
          <h2>Servizi</h2>
          <p class="muted">Essenziale, pulito, comodo. Tutto quello che serve per vivere Milano bene.</p>
          <ul class="muted">
            <li><strong>Wi-Fi</strong> veloce</li>
            <li><strong>Cucina</strong> attrezzata</li>
            <li><strong>Biancheria</strong> e asciugamani inclusi</li>
            <li><strong>Self check-in</strong> (quando disponibile)</li>
            <li><strong>Zona servita</strong>: ristoranti, market e servizi in Paolo Sarpi</li>
            <li><strong>Ideale per eventi</strong> e soggiorni business/leisure</li>
          </ul>

          <h3 style="margin-top:18px;">Regole essenziali</h3>
          <ul class="muted">
            <li>Niente feste / eventi</li>
            <li>Rispetto del vicinato</li>
            <li>Orari e capienza come da prenotazione</li>
          </ul>
        </div>

        <div class="card section" id="foto">
          <h2>Foto</h2>
          <p class="muted">Clicca su una foto per ingrandire e navigare.</p>

          <div class="grid" id="gallery">
            <div class="thumb" tabindex="0" data-full="images/foto1.jpg" data-alt="Foto 1"><img src="images/foto1.jpg" alt="Foto 1"></div>
            <div class="thumb" tabindex="0" data-full="images/foto2.jpg" data-alt="Foto 2"><img src="images/foto2.jpg" alt="Foto 2"></div>
            <div class="thumb" tabindex="0" data-full="images/foto3.jpg" data-alt="Foto 3"><img src="images/foto3.jpg" alt="Foto 3"></div>
            <div class="thumb" tabindex="0" data-full="images/foto4.jpg" data-alt="Foto 4"><img src="images/foto4.jpg" alt="Foto 4"></div>
            <div class="thumb" tabindex="0" data-full="images/foto5.jpg" data-alt="Foto 5"><img src="images/foto5.jpg" alt="Foto 5"></div>
            <div class="thumb" tabindex="0" data-full="images/foto6.jpg" data-alt="Foto 6"><img src="images/foto6.jpg" alt="Foto 6"></div>
          </div>
        </div>

        <div class="card section" id="posizione">
          <h2>Posizione</h2>
          <p class="muted">Milano — zona Paolo Sarpi (Chinatown). L’indirizzo completo e le istruzioni di check-in vengono condivisi dopo la conferma.</p>
          <p class="muted" style="margin-bottom:0;">
            Suggerimento: puoi inserire qui un link a Google Maps oppure un embed in futuro.
          </p>
        </div>

        <div class="card section" id="contatti">
          <h2>Contatti</h2>
          <p class="muted">Scrivici un messaggio: ti rispondiamo appena possibile.</p>

          <!-- FORM (mailto) -->
          <form class="form" id="contactForm">
            <div class="row2">
              <input type="text" id="name" placeholder="Nome" required>
              <input type="email" id="email" placeholder="Email" required>
            </div>
            <input type="text" id="subject" placeholder="Oggetto (es. Richiesta info)" required>
            <textarea id="message" placeholder="Messaggio" required></textarea>

            <!-- TODO: cambia questa email -->
            <input type="hidden" id="toEmail" value="INSERISCI_LA_TUA_EMAIL@DOMINIO.IT">

            <button class="btn primary" type="submit" style="border:0; cursor:pointer;">Invia messaggio</button>
            <div class="hint">Nota: l’invio apre il tuo client email (Gmail/Outlook). Se vuoi un invio “automatico” senza client, serve un servizio form (te lo preparo quando vuoi).</div>
          </form>
        </div>
      </div>

      <!-- RIGHT COLUMN: BOOKING -->
      <div class="sticky" id="prenota">
        <div class="booking-shell">
          <h3>Prenota ora</h3>
          <p class="muted">Seleziona date e ospiti. I risultati si aprono in una nuova scheda.</p>

          <div id="apartmentIframeAll"></div>

          <script src="https://login.smoobu.com/js/Settings/BookingToolIframe.js"></script>
          <script>
            BookingToolIframe.initialize({
              url: "https://login.smoobu.com/en/booking-tool/iframe/1147778?newTabAfterSearch=true",
              baseUrl: "https://login.smoobu.com",
              target: "#apartmentIframeAll"
            });
          </script>

          <p class="hint" style="margin-top:10px;">
            Prezzi e disponibilità aggiornati in tempo reale.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- LIGHTBOX -->
  <div class="lb" id="lightbox" aria-hidden="true">
    <div class="lb-inner" role="dialog" aria-modal="true" aria-label="Galleria foto">
      <div class="lb-top">
        <div class="title" id="lbTitle">Foto</div>
        <div class="lb-actions">
          <button class="iconbtn" id="lbPrevTop" type="button">‹</button>
          <button class="iconbtn" id="lbNextTop" type="button">›</button>
          <button class="iconbtn" id="lbClose" type="button">✕</button>
        </div>
      </div>

      <div class="lb-img" id="lbImgWrap">
        <img id="lbImg" src="" alt="">
      </div>

      <div class="lb-nav">
        <button class="iconbtn lb-prev" id="lbPrev" type="button">‹</button>
        <button class="iconbtn lb-next" id="lbNext" type="button">›</button>
      </div>
    </div>
  </div>

  <!-- STICKY FOOTER -->
  <div class="footerbar">
    <div class="inner">
      <div class="mini">
        <span>© <span id="y"></span> Casa dei Narcisi</span>
        <span>•</span>
        <a href="#contatti" style="text-decoration:none; color:var(--acc2); font-weight:750;">Contatti</a>
        <span>•</span>
        <a href="#prenota" style="text-decoration:none; color:var(--acc2); font-weight:750;">Prenota</a>
      </div>
      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <a class="btn ghost" href="#contatti">Scrivi</a>
        <a class="btn primary" href="#prenota">Verifica disponibilità</a>
      </div>
    </div>
  </div>

  <script>
    // Year
    document.getElementById("y").textContent = new Date().getFullYear();

    // Contact form (mailto)
    document.getElementById("contactForm").addEventListener("submit", function(e){
      e.preventDefault();
      const to = document.getElementById("toEmail").value.trim();
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const subject = document.getElementById("subject").value.trim();
      const message = document.getElementById("message").value.trim();

      const body = [
        `Nome: ${name}`,
        `Email: ${email}`,
        ``,
        message
      ].join("\n");

      const url = `mailto:${encodeURIComponent(to)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
      window.location.href = url;
    });

    // Lightbox gallery
    const thumbs = Array.from(document.querySelectorAll("#gallery .thumb"));
    const lb = document.getElementById("lightbox");
    const lbImg = document.getElementById("lbImg");
    const lbTitle = document.getElementById("lbTitle");

    let idx = 0;

    function openLb(i){
      idx = i;
      const full = thumbs[idx].getAttribute("data-full");
      const alt  = thumbs[idx].getAttribute("data-alt") || `Foto ${idx+1}`;
      lbImg.src = full;
      lbImg.alt = alt;
      lbTitle.textContent = `${alt} (${idx+1}/${thumbs.length})`;
      lb.classList.add("open");
      lb.setAttribute("aria-hidden","false");
      document.body.style.overflow = "hidden";
    }

    function closeLb(){
      lb.classList.remove("open");
      lb.setAttribute("aria-hidden","true");
      lbImg.src = "";
      document.body.style.overflow = "";
    }

    function prev(){
      idx = (idx - 1 + thumbs.length) % thumbs.length;
      openLb(idx);
    }
    function next(){
      idx = (idx + 1) % thumbs.length;
      openLb(idx);
    }

    thumbs.forEach((t, i) => {
      t.addEventListener("click", () => openLb(i));
      t.addEventListener("keydown", (e) => {
        if(e.key === "Enter" || e.key === " ") { e.preventDefault(); openLb(i); }
      });
    });

    document.getElementById("lbClose").addEventListener("click", closeLb);
    document.getElementById("lbPrev").addEventListener("click", prev);
    document.getElementById("lbNext").addEventListener("click", next);
    document.getElementById("lbPrevTop").addEventListener("click", prev);
    document.getElementById("lbNextTop").addEventListener("click", next);

    // close by clicking backdrop
    lb.addEventListener("click", (e) => {
      if(e.target === lb) closeLb();
    });

    // keyboard
    document.addEventListener("keydown", (e) => {
      if(!lb.classList.contains("open")) return;
      if(e.key === "Escape") closeLb();
      if(e.key === "ArrowLeft") prev();
      if(e.key === "ArrowRight") next();
    });

    // simple swipe on image area
    let touchX = null;
    const imgWrap = document.getElementById("lbImgWrap");
    imgWrap.addEventListener("touchstart", (e) => { touchX = e.touches[0].clientX; }, {passive:true});
    imgWrap.addEventListener("touchend", (e) => {
      if(touchX === null) return;
      const dx = e.changedTouches[0].clientX - touchX;
      touchX = null;
      if(Math.abs(dx) < 40) return;
      if(dx > 0) prev(); else next();
    }, {passive:true});
  </script>
</body>
</html>
